<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø³Ø¬Ù„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #fdfdfd; font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; padding: 0; }
        .admin-header { background: white; padding: 15px 40px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; }
        .admin-logo { height: 75px; width: auto; }
        .admin-title { color: #4b3621; font-weight: bold; font-size: 22px; margin: 0; }
        
        .admin-container { padding: 30px 50px; }
        .top-actions { display: flex; justify-content: flex-end; gap: 10px; margin-bottom: 20px; }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .btn-edit-mode { background-color: #ff9800; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-weight: bold; transition: 0.3s; }
        .btn-edit-mode:hover { background-color: #e68a00; }
        .btn-green-pdf { background-color: #2e7d32; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-weight: bold; text-decoration: none; font-size: 14px; }

        .table-wrapper { background: white; border: 1px solid #4b3621; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .table thead { background-color: #4b3621; color: white; }
        .table th, .table td { padding: 15px; text-align: center; vertical-align: middle; font-size: 14px; }
        
        /* Ø¥Ø®ÙØ§Ø¡ Ø¹Ù…ÙˆØ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ ÙˆØ²Ø± Ø§Ù„Ø­Ø°Ù ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        .select-column, #delete-btn-area { display: none; }

        .btn-gold { background-color: #b8860b; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; font-size: 18px; width: 100%; margin-top: 20px; }
        .btn-brown { background-color: #8d6e63; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; font-size: 18px; text-decoration: none; text-align: center; width: 100%; display: block; margin-top: 10px; }
    </style>
</head>
<body>

    <header class="admin-header">
        <img src="{{ url_for('static', filename='logo_gov_sharjah.png') }}" class="admin-logo">
        <h1 class="admin-title">Ø³Ø¬Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
        <img src="{{ url_for('static', filename='logo_sharjah_police.png') }}" class="admin-logo">
    </header>

    <div class="admin-container">
        <div class="top-actions">
            <button type="button" class="btn-edit-mode" onclick="toggleEditMode()">ğŸª„ ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø­Ø°Ù</button>
            <div class="btn-green-pdf">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„ PDF</div>
        </div>

        <form action="{{ url_for('delete_logs', code=request.args.get('code')) }}" method="POST">
            <div class="table-wrapper">
                <table class="table table-hover m-0">
                    <thead>
                        <tr>
                            <th class="select-column">ØªØ­Ø¯ÙŠØ¯</th>
                            <th>#</th>
                            <th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th>
                            <th>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ</th>
                            <th>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</th>
                            <th>Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for log in logs %}
                        <tr>
                            <td class="select-column"><input type="checkbox" name="log_ids" value="{{ log.id }}" class="form-check-input"></td>
                            <td>{{ loop.index }}</td>
                            <td style="font-weight: bold;">{{ log.username }}</td>
                            <td>{{ log.military_id }}</td>
                            <td>{{ log.car_type }}</td>
                            <td dir="ltr">{{ log.timestamp | format_datetime_uae }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div id="delete-btn-area">
                <button type="submit" class="btn-gold">Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© âŒ</button>
            </div>
            <a href="{{ url_for('index') }}" class="btn-brown">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        </form>
    </div>

    <script>
        function toggleEditMode() {
            // Ø¥Ø¸Ù‡Ø§Ø± Ø£Ùˆ Ø¥Ø®ÙØ§Ø¡ Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯
            var cols = document.querySelectorAll('.select-column');
            var deleteArea = document.getElementById('delete-btn-area');
            
            cols.forEach(function(col) {
                if (col.style.display === "table-cell") {
                    col.style.display = "none";
                    deleteArea.style.display = "none";
                } else {
                    col.style.display = "table-cell";
                    deleteArea.style.display = "block";
                }
            });
        }
    </script>
</body>
</html>